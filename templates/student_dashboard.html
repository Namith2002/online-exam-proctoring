{% extends "base.html" %}
{% block content %}
<div class="mb-4">
  <h1>Student Dashboard</h1>
  <p>Welcome back! Here are your available exams and previous attempts.</p>
</div>

<!-- Real-time Stats -->
<div class="stats-grid" id="student-stats" data-role="student">
  <div class="stat-card">
    <div class="stat-value" id="student-total-exams">-</div>
    <div class="stat-label">Available Exams</div>
  </div>
  <div class="stat-card">
    <div class="stat-value" id="student-my-attempts">-</div>
    <div class="stat-label">Total Attempts</div>
  </div>
  <div class="stat-card">
    <div class="stat-value" id="student-pending">-</div>
    <div class="stat-label">Pending Exams</div>
  </div>
</div>

<div class="card mb-4">
  <div class="card-header">
    <h2 class="mb-0">📝 Available Exams</h2>
  </div>
  <div class="card-body">
    {% if exams %}
      <ul class="list">
        {% for e in exams %}
          <li class="list-item">
            <div class="list-item-header">
              <div>
                <div class="list-item-title">{{ e.title }}</div>
                <div class="list-item-meta">
                  ⏱️ {{ e.duration_minutes }} minutes • 
                  📋 {{ e.max_questions }} questions
                </div>
              </div>
              <div class="list-item-actions">
                <a href="{{ url_for('start_exam', exam_id=e.id) }}" class="btn primary">
                  Start Exam
                </a>
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="text-center" style="padding: 2rem;">
        <p style="font-size: 3rem; margin-bottom: 1rem;">📚</p>
        <h3>No Exams Available</h3>
        <p class="small">Check back later for new exams.</p>
      </div>
    {% endif %}
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h3 class="mb-0">� Your Exam Attempts</h3>
  </div>
  <div class="card-body">
    {% if attempts %}
      <ul class="list">
        {% for a in attempts %}
          <li class="list-item">
            <div class="list-item-header">
              <div>
                <div class="list-item-title">{{ a.title }}</div>
                <div class="list-item-meta">
                  🕒 Started: {{ a.start_time }}
                </div>
              </div>
              <div class="list-item-actions">
                {% if a.submitted %}
                  <span class="btn info sm">
                    Completed
                  </span>
                {% else %}
                  <span class="btn warning sm">
                    In Progress
                  </span>
                {% endif %}
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="text-center" style="padding: 2rem;">
        <p style="font-size: 3rem; margin-bottom: 1rem;">📈</p>
        <h4>No Exam History</h4>
        <p class="small">Your completed exams will appear here.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
